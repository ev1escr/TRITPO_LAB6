# Test

## Введение

Приведенный документ описывает тестирование проекта "Sneakers Store"

## 1  Описание тестирования

### 1.1  План тестирования

План тестирования предназначен для однозначной трактовки требований к процессу тестирования разработанного программного обеспечения.
Согласно сказанному, план тестирования состоит из следующих пунктов:

Цель тестирования: определяет задачи, которые должны охватывать разрабатываемые тесты.

Требования к тестированию: набор правил, соблюдение которых необходимо при разработке тестов, а также само описание процесса тестирования.

Функциональное тестирование: описание объектов на основе которых будет проводиться тестирование.

### 1.2 Описание проекта

"Sneakers Store" представляет из себя веб-приложение, каталог онлайн товаров, в частности спортивной обуви и сопутствующей атрибутики. 

Пользователь имеет возможность просматривать сведения об имеющихся в базе данных товарах, добавлять вещи в корзину, оформлять заказ. Кроме того, предусмотрена возможность регистрации, после чего пользователь может войти в свой личный кабинет, где можно редактировать информацию о себе, персонализировать ленту товаров. 

## 2 Стратегия тестирования

### 2.1 Цель тестирования

Цель тестов:
-убедиться что добавление нового пользователя происходит корректно и работает в соответствии с составленной спецификацией 
-убедиться что обновление состояния существующего пользователе просходит корректно и работает в соответствии с составленной спецификацией
-убедиться что попытка удаления несуществующего пользователя происходит корректно и работает в соответствии с составленной спецификацией

### 2.2 Требования к тестированию

1)Первый тест проверяет успешное добавление нового пользователя в базу данных.
В тесте сначала создаются объекты сущности и DTO, затем, когда будет проверка в классе для работы с базой данных на то, что нет ещё пользователя с такой почтой и таким телефоном, возвращается false, чтобы не было выброшено исключение, информирующее о том, что пользователь уже существует с такими данными, так как эти данные имеют ограничение уникальности. Затем проверяется, что созданный DTO объект должен быть таким же, который возвращает сервис для работы с пользователем, то есть его поля не были незапланированно изменены. Затем верифицируются количества вызовов каждого из методов - для проверки существования такого пользователя в базе по указанным полям, сохранение пользователя в базу данных и конвертация из объекта сущности, отображающего таблицу базы данных в DTO объект, для общения с пользователем.
Тестовая среда и данные будут максимально эмулировать производственные.
Тестирование будет использовать предварительно загруженные реальные данные, которые могут и будут использоваться в реальном конечном продукте.

2)Второй тест проверяет обновление существующего пользователя.
Сначала создаются объекты сущности и DTO для отображения таблицы базы данных и общения с пользователем соответственно. Указывается, что при попытке получить пользователя пo id из базы данных будет возвращён не null-объект, что говорит о том, что пользователь действительно существует. Затем проверяется, что возвращённый объект имеет нужно состояние - все поля пустые. Далее верифицируются количеств вызовов каждой из функций. Получение по id - единожды за всю транзакцию, при чём, методом only() проверяется, что за всю транзакцию было ровно одно обращение к классу репозитория, обновление пользователя и конвертация полученного из базы данных пользователя в DTO-объект для общения с пользователем приложения - единожды.
Тестовая среда и данные будут максимально эмулировать производственные.
Тестирование будет использовать предварительно загруженные реальные данные, которые могут и будут использоваться в реальном конечном продукте.


3)Третий тест будет генерирует реакцию разработанногао приложения на попытку удаления несуществующего польззователя.
Сначала генерируется случайный id, затем указывается, что при проверке существования пользователя в базе данных по такому id будет возвращена информация, что его там не существует. Далее проверяется, что из-за отсутствия пользователя в базе данных при попытке его удаления будет выброшено соответствующее исключение. В завершении верифицируются количества вызовов каждой из функций. Проверка существования пользователя по заданному id - один раз должна быть вызвана данная функция, при чём, обращение к классу, метод которого вызывается для проверки, тоже должно быть ровно одно. В последней строке проверяется, что функция удаления пользователя не была вызвана в рамках данной транзакции из-за отсутствия пользователя как такового в базе данных.
Тестовая среда и данные будут максимально эмулировать производственные.
Тестирование будет использовать предварительно загруженные реальные данные, которые могут и будут использоваться в реальном конечном продукте.


### 2.3 Функциональное тестирование

**Цель:** проверить функции приложения. Функциональное тестирование выполняется путем подачи входных данных и проверки выходных данных приложения.

**Метод:** тест будет использовать предварительно загруженные данные (входные и ожидаемые выходные данные) для проверки вывода функций из разных входных данных.

**Критерии приемлемости теста:** пройти, если результат функции такой же, как и ожидалось, иначе - не пройти.

**Сроки:** единственное требование здесь — не допускать вечных циклов.

### 2.3.1 Тестирование алгоритма функции "Добавление нового пользователя"

Тест " shouldSaveNewCustomer " не принимает входных значений, вызывает методы программы и сравнивает фактический и ожидаемый результаты и выводит соответствующий ответ.  

### 2.3.2 Тестирование алгоритма функции "Обновления состояния существующего пользователя"

Тест " shouldUpdateExistedCustomer " не принимает входных значений, вызывает методы программы и сравнивает фактический и ожидаемый результаты и выводит соответствующий ответ. 

### 2.3.4 Тестирование алгоритма функции "Удаление несуществующего пользователя"

Тест " shouldThrowNotFoundExceptionWhileDeleting " не принимает входных значений, вызывает методы программы и сравнивает фактический и ожидаемый результаты и выбрасывает исключение при попытке удаления несуществующего пользователя.

### 2.4 Нагрузочное тестирование

Нагрузочное тестирование было проведено при помощи утилиты Postman, а для работоспособности сайта при сильной нагрузке была написаны специальные тесты.

## 3 Среда тестирования

ОС:

MAC OS, Windows, Linux

Язык программирования и библиотеки:

Среда разработки и тестирования: IntelliJ IDEA 2021.3.2

Среда для нагрузочного тестирования: Postman

Язык программирования: Java 17.0.2

Средство тестирования: Java Unit Tests
